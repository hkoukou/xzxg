import{m as pt,_ as Y,j as Q,b as vt,c as I,o as S,d as f,h as V,n as G,g as O,F as tt,k as et,t as q,e as nt,p as ht,r as ot,f as D,q as P,s as mt,M as rt,i as gt,v as yt,x as Ct,y as bt,z as Et,A as wt,B as xt,C as Tt,D as Bt,E as St,G as It}from"./index-DGYueMey.js";const Rt="/xzxg/static/png/submit-B_aKT3nF.png",j=pt("chat",{state:()=>({appId:"",tenantId:"",conversationId:-1,qaId:"",chatLogId:"",conversationList:[]}),actions:{sendQuestion(E){return this.appId,this.tenantId,this.conversationId,new Promise((h,y)=>{setTimeout(()=>{const p=parseInt(Math.random()*100),l={conversationId:p,qaId:"qaId"+p,chatLogId:"chatLogId"+p};this.conversationId=l.conversationId,this.qaId=l.qaId,this.chatLogId=l.chatLogId,h()},1500)})},setThinking(E){this.thinking=E},addConversation(E){this.conversationList.push(E)},delConversation(E){this.conversationList=this.conversationList.filter(h=>h.id!==E)},updateConversation(E,h){const y=this.conversationList.findIndex(p=>p.id==E);y>-1&&(console.log(h),this.conversationList[y]={...this.conversationList[y],...h})},clearConversation(){this.conversationId=-1,this.qaId="",this.chatLogId="",this.conversationList=[]}}}),{appId:be,currentAnswerId:Ee,qaId:we,chatLogId:xe}=j();function kt(E){const{onOpen:h,onMessage:y,onError:p,onClose:l}=E;let a=!1,r=800,t=0,i=10;setTimeout(()=>{!a&&h&&h(!0)},500);const e=()=>{if(a||t>=i){!a&&l&&l(),a=!0;return}const u=r*(.5+Math.random());setTimeout(()=>{if(a)return;const C={id:t,timestamp:new Date().getTime(),answer:`这是第 ${t+1} 条模拟数据`};y&&y(C),Math.random()<.1&&p&&p(new Error(`模拟错误: 事件 ${t} 处理失败`)),t++,e()},u)};return e(),{abort:()=>{a||(a=!0,l&&l())}}}function Z(){const E=+new Date+"";return(+(parseInt((1+Math.random())*65536)+""+E)).toString(32)}const Qt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHKADAAQAAAABAAAAHAAAAABkvfSiAAAEtUlEQVRIDb1WW2tdRRReM3v2uSQppXoa2yZGiw8lgk+CSJFaQfOgiG3Jiz77ovVFf4HkFxQxIOKbUSQVNdCXgCAFr6CCRZFKtY3FRHuJSfAkJ9l7z/h9M3vOSbYVT0ScZO81l2/dvrX2JCL/81BVf9OPf3Qgseqwk6RePet77dx6KubSs/NHl6s6XYfTT5wf1y55zYk71t0Uzhye3s52A8DiROFNDEaEhqXFyTlJzPPPnTv6SwCUlqaf+mQSG28C14guPGCngb9YVAomHZxCclThpa0Vpd2Tp99/6GNi1CunPh/FxreY7+XG9lHNIGZDyVE9r3qMAWlRV5Tu3Hf67CN/GFuXKXEqOIvpBXueLgvD0YFFCjRC6Qcz82kFhYq6RN1c5G6R5kvQmTLWqIkuJSU9pKln0HsJS7yDkXAc6Yz4mNEt7Tk3Aa0p42r6II1wMJMYlU6UNPek0l7ZQp3COY57hfJbITNqJkZJY9BIezUrwTvtYfMgD0xhlO4hYADW731gnzz69J1Sq2tZ/rUjc69fkZuQ4NOfewml6P/+4y05dvKQd/rbzxvAX5a15a0qPqEfbWta4uNSLYOtVCaeOSSpsWLzTPbtN/IY1hZnNgUDxFPiQbBy21hTHj55h2hVePzwSCrHJw8Ahw6mDvCUfDhYwxAJV+iG20eaolwOZazLhIZHDBxwDSXyW34GCvPh0VRckfne6eFTsRrKKMv2pqILw8hjkcVZWVrckByZ0SZ+PX5xoSOOvmiET+wpyKWrHSngkCPilxba4hMhiQqvbhOUlBZGQA8fLe31QubfWZK8kyHLXNaud2T+3Ws+YtJEQ7EEFhlcv5HJ+blrUmwG/E0E/OHcDR+cNUnAk9oupagFvsMQIShlbb67sC4/fH1Z9uzV8vuqlaJuxA2CJgTk04iUcgmdLz9bkwufrsjgUCIrxA+gBAOgOpahS3jo0m2UOjAGFKiym0q21q24ZipFMxHXgFPWJPKGEF2iBT4xSaWzmUtnA3N8GraBzNhcYIM/rIBSLp2dnW0a30FlxPyALSinT5UZtDDXodt8A2h0G9VjhhadnCIQsKJyg2YDHjV2dRihHnB05odykmXZqG+auEdDrK+qQ+IG8DcJm8SnBcHGAf2lP8wTP6dD3hjePA5jE+LPhdcMGQqaMR8yTD2OW11VFhFEAyEaBlXG7QNkhMFGuRvNedndU1aMMRoZhqx4Sr7j1ca17yW8yp7yCO6HuJktZiUrYX/nO5abEkT5P8a82roZxGwo+xl0FnU8PkQQIsEGa8ioKI3rfEUMm8Yig5JXXwVsMyYM+o1hch3n5TF6ygdLGUZ5UOoHf7jYlV047C69QQyb5iJiGC81dghksIp6/aRwUcKUxpXXUKiXY0dh8KNAX3rpNyoBqaJYremtb+4pfnyr4dr8aMTkRr2otX4P84GyaUjCWXxJL585ddf33hBe+IaGsjw7Etd9yxBbF25enRybf+GDqw/iIzrhVNISa9+ePjH2RRfRmxS96b+fRdL7saBmZmbGQXOzH/DfYXBl9z1crVa7CPR+3Bj/+D8ryqTwodchh6KHJEnWd5Nh1NuV5P2JAIeLotCtVmtxV8r/BfhP4QsXkNN7l0AAAAAASUVORK5CYII=",Ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGqADAAQAAAABAAAAGgAAAABMybYKAAACN0lEQVRIDe2Wv2sTYRjHc6lLhiBIyc+SBHGwBqreNaQnof+DQ+js4uLqoh0qiiK4+Tc46mYXsaAOLQ65kCCpLv6AJBewEFRqSS7J+XmgKSXcXe5iBgdfeHh/PO99P/d973lDQqH/zeEENE1TJRxSJ0tnTkYzDgqFwsZoNLrF4yax4SbzVyAgN4HcUBTFHg6H224QWVe8kh45RVXV2+TLxJFt20+r1eoLj/2hBa+kU65cLi9EIpF7uLgeDoe79I8Nw3jptPf0WiBHuq5Her3eQ8TXEelYlvWgXq+/Py3oNvbtKJ/Pn0PkCRCdo/rKN9kEUnUTnlz3VQzFYnEJ4UcALiHwkX6zVqt9mxTzmk89Ou7HRQTuE+cJg7hbqVQO6AM1T0dUlsZRbeEgheou3+QOx3UYiHC82dURThapqmfck0XiFeMtnFizQOSZsJ8HcWVHo1Hbz163Pa5VZ5rm71gs9gmISlzt9/vLqVTqHeszuXIFyZt1Op024lLCV4jLEsz35CUYB2qeIFFC9CCTyexRECtMV3CnxeNxg5f4EYQ0FSRirVbrZzabfTsYDJaZirNiIpH4AOy75P00XyARajabR7lcbgfYBVwJbC2ZTH7BcXOuoGPYoFQqve52u0tSIJT8WjqdNtvt9udpMN+OxkKNRsPGxRvcnJXvxR27BuwXsP3xHqc+MGgsAmwXgFz4VYA6BWLxzWrj/GQ/M0iEcFEBdkhFyk9VEvjzScBc5/LHRH4X5yr6z4v9AZbd2BDVpKmVAAAAAElFTkSuQmCC",Nt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGqADAAQAAAABAAAAGgAAAABMybYKAAACLElEQVRIDeWUP2gTURzHm1wwIdRMTUIScHHIkCXJxaEt/WMrFQQXUcRBJweXtpOLq5OTQ93cLIJDKWIodSgtOhTB/KEBu1mzmEuG4qJDMLnz84PG6e7du9BJH/x47977ve/nvu/97iYm/qtWKpUWiPnzMB1WiYTD4RfEjmmaq6o8nTVDlZTJZCYBLZNzPZfLGZ1O54MqX7WmBFmWdZhOp09DodBVRK5ls9kp5t6rBL3WlCDZ1O12azg7AbbI4xLjy/l8vtput21Z122+IBHCxRecHXGMCwDn+v1+KZlMvuv1er/PFSRiODtJpVKHwOaAzRqGMQ1sF9gvHZiWo5EQot8pij2eZyQikcgiR7mP4x+jHK8+EEhEqLxTiqKKqyuO4whwmedPwCwviMwHBskmNH/G4/HtaDRaBDhDrAA74iXasu7WQm6TunOFQuECsFeA7hIWDs16ve7qTPln8APGYjGH4nD88mQ9opPklsO3dJH5N7i4Qf/Ntu2HjUbD1Y3sHwvEvy/DUQlknjhmfB9IQwS9WuBiqFQqecS2iGkAn+lvcy/HXoDRfKA7KhaLUtJv2WwSB3y0N4F8HYmpeu2q47hWEHpJXAJWHQwG91qtltZfQV5AyxGQO+RunkFeJxKJW0EgAvItBiCPyHtGTBIb3Pk6vVZJk/e3KR2Vy+XHXPhzsmP0T7mPNcaBIUJTOkL8AfcxIO9JrVbbkA3jNj/Q6nA4tJvN5sdxAf/uvj8EbrcKVcVkrAAAAABJRU5ErkJggg==",Ft={class:"chat-tip"},Dt={class:"chat-tip-items"},Ht=["onClick"],J=145,Ut=435,_t={__name:"chatTip",props:{submitTip:Function},setup(E){const h=E,y=Q(["提示问答一","提示问答二","提示问答三","提示问答四","提示问答五"]),p=Q(0),l=vt(()=>Math.max(0,y.value.length*J-Ut)),a=i=>{i&&h.submitTip(i)},r=()=>{p.value=Math.max(-l.value,p.value-J)},t=()=>{p.value=Math.min(0,p.value+J)};return(i,e)=>(S(),I("div",Ft,[e[2]||(e[2]=f("div",{class:"chat-tip-title"},[f("img",{src:Qt,alt:""}),V(" 提示语中心: ")],-1)),f("div",Dt,[f("ul",{style:G({transform:`translateX(${O(p)}px)`})},[(S(!0),I(tt,null,et(O(y),(u,C)=>(S(),I("li",{key:C,style:G({transform:`translateX(${C*145}px)`}),onClick:w=>a(u)},q(u),13,Ht))),128))],4)]),f("div",{class:"chat-tip-btn"},[f("a",{href:"javascript:void(0)",onClick:t},e[0]||(e[0]=[f("img",{src:Ot,alt:"",title:"往前"},null,-1)])),f("a",{href:"javascript:void(0)",onClick:r},e[1]||(e[1]=[f("img",{src:Nt,alt:"",title:"往后"},null,-1)]))])]))}},Lt=Y(_t,[["__scopeId","data-v-d590f4fb"]]),it="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAADFElEQVRIDa2WS09TQRTH29vaulCMEnxQ40r5Cog7t1pB3cKCKH3YpJGFW6HCB/BRrS2PhoWuFQSW6hI+gBtduNHWSKJRTLBaWn//y9xC6W1Dgyc5PTPn8Z+5M2fOqdfTguLxeKhSqfRXq9Ww1+s9h+sp415Evke/DC/MzMx8agbjdTMkEomT5XL5HrabsM/NZ4euzDhvWdZENpv9vENvDxsWiEQi/ez2OdZDxvkbcomdriCL2BhWuxn3Mg4jj8GiH+iHpqenF7emW791C8RisSRODzBZ8Bqsr5iC/iIbKBqNHsA/wkLjGI/DVca3c7lc2nGuLQD4FZznMeDjXfH5fNcymcwXx7GVHBkZOcERvcCnD64Qf5VFXinGXgCH0zi8Y94h8FKpdHFubu63HPZKyWQySNxr/C/A636/v0cb1FF4AL+L6IDXtPN2wYWRTqdLZNx1hl/hwyRJCunxmt1/ZOyHk5z3YxlcqHacxlZ18fGQJAlO4Qm2TRY542f3A0wErmzJwXXERd5HkYADdQaP5w9ATznr0Z36UCg0VSgUJtB1ckwDFhd7yTgsNcmWOPbd4AoJEHvLxNZEKpXSu7BTFXvYYhd6oaLVLdHwG2zQbCvcFpbVxgL7rC7Zfv6sVtiO298IYAer286i/cG1jtYCKlx6XXr+/4U4DQerqEv+YFB7m6CXmuildrWBeV5GYeuSneIUVm2RYRcppzfgyi7eAEC2OhIGmJelRC77eQzz5Osj5kfhGFz30EjdO+jEe6Uojp1wmZc9b+Xzed34rIkeUy8w47aFih5BYyYwr0ZkZxFfkEK5DnfxRS+Hh4cPMm6LFGMqqsr2T3Y/KQB7AVU9zmuQuc65NxAIvG3nS+QbDAbfENsHqycMOW20roCZhvMQJ+nXcJzkIrNNSojHJIXuTcfSBasXjLo2HIw2UQ3V4J8xOWJU35FL8Cr6Ap+uHdotE52yxWmZv9jMIC1zAV2N6r7A0Zp/E9rVDViVthVtYpzlHsfdOqDrAg6aegW71Z8AVdwe2K5byKIeEfpFLnbB7d+Eg/EPx8gwpAs7B58AAAAASUVORK5CYII=",Mt={class:"chat-thinking"},Vt={__name:"chatThink",props:{stopThinking:Function},setup(E){const h=E,y=()=>{h.stopThinking(!0)};return(p,l)=>(S(),I("div",Mt,[l[1]||(l[1]=nt('<div class="main" data-v-6fd754bf><div class="animate" data-v-6fd754bf><div class="dot" data-v-6fd754bf></div><div class="dot" data-v-6fd754bf></div></div><div class="text" data-v-6fd754bf>小安思考中...</div></div>',1)),f("div",{class:"stop"},[f("a",{href:"javascript:void(0);",class:"btn-sm",onClick:y},l[0]||(l[0]=[f("img",{src:it,alt:""},null,-1),V(" 停止 ")]))])]))}},Yt=Y(Vt,[["__scopeId","data-v-6fd754bf"]]),Kt="data:image/png;base64,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",Xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAACo0lEQVRIDa2Wy2sTURTGOzMhhIDkQSRQrA+KXQiuXBVc6UI00KAIIrhxIYhUV91L/QPcWJCCVheCroSmVFe6denChcQXYktLMOQlNZFkEn9fMplmmiHaJAfOnHvvOec75577GmNiAMXj8UOtViuNSQo5bRjGpMxpb9H+SnMduVooFDY17keG32AikZhsNBqLOF9Hbzk2P5E5uAlPwTFYZBPwSSAQuJvP57c6Q7vfvgDRaHQO4GeYHIA/4rxsmuZLstzYdQM9FjuM7iJjt7CfQf6if61UKmV67TxtwO/g2IT/wPMou9l77PZ0ArKFq7AtjD36TleZy8AxPO9rNGAwEomcwrfiBJnzmKrmjnIHwzMe5T46JJkGRxWoCFOu7RIEg8H71HGWGi6Uy+UX+8D0mNZqtWwoFJoA61yz2YzQXzOcrfgdyy/FYvEEUrtkFLKYwScAjhDoqEnW2ucW8iFyWHCTRN8A/CCZTIYAXnIw0yaNFKzDsyY5JCnBg/jO1+v195Qn7+CkNINpOnlq/21IcLnVWcdZ5DJ4x5nBigaFbdLRauuUjkS5XG6HNbwJiCrSnoGwVSKR3RGjfwnyimvmJEjP4bcT7N0si1McHdofQSXSrRjlgGktxk4q0bpQLcvyHu8xhdIMVsHSlXtbccaE68JY1Wq1wvGeItDZcDhcpv/O1Y6r0XPZ1Vjw0yPg9r0vLlbPdV3j2F9xFf/ZUGLwBr73el3cmjs3YYlSXcDgMmVrMqZy/et+CgK8gN1TOAI/wu8Dsk19U9JMCNJ9Mn9gtcQOy/DeZh0fCYOyzti2fYn2DfgYXIavctBeI13qCyCN1sTn0f/NTtskeAATXWx6s0UN+DFJLJLEdnuk5+MboKt33oq+3xaCbBPsM3b6bckM+m35C983BEriO96tAAAAAElFTkSuQmCC";var M={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */var zt=M.exports,$;function Jt(){return $||($=1,function(E,h){(function(p,l){E.exports=l()})(zt,function(){return function(){var y={686:function(a,r,t){t.d(r,{default:function(){return ft}});var i=t(279),e=t.n(i),u=t(370),C=t.n(u),w=t(817),T=t.n(w);function m(A){try{return document.execCommand(A)}catch{return!1}}var x=function(o){var n=T()(o);return m("cut"),n},v=x;function R(A){var o=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[o?"right":"left"]="-9999px";var s=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(s,"px"),n.setAttribute("readonly",""),n.value=A,n}var N=function(o,n){var s=R(o);n.container.appendChild(s);var c=T()(s);return m("copy"),s.remove(),c},K=function(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},s="";return typeof o=="string"?s=N(o,n):o instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(o==null?void 0:o.type)?s=N(o.value,n):(s=T()(o),m("copy")),s},H=K;function F(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?F=function(n){return typeof n}:F=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},F(A)}var b=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=o.action,s=n===void 0?"copy":n,c=o.container,d=o.target,k=o.text;if(s!=="copy"&&s!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(d!==void 0)if(d&&F(d)==="object"&&d.nodeType===1){if(s==="copy"&&d.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(s==="cut"&&(d.hasAttribute("readonly")||d.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(k)return H(k,{container:c});if(d)return s==="cut"?v(d):H(d,{container:c})},g=b;function B(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?B=function(n){return typeof n}:B=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},B(A)}function U(A,o){if(!(A instanceof o))throw new TypeError("Cannot call a class as a function")}function W(A,o){for(var n=0;n<o.length;n++){var s=o[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(A,s.key,s)}}function at(A,o,n){return o&&W(A.prototype,o),n&&W(A,n),A}function st(A,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(o&&o.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),o&&X(A,o)}function X(A,o){return X=Object.setPrototypeOf||function(s,c){return s.__proto__=c,s},X(A,o)}function ct(A){var o=lt();return function(){var s=_(A),c;if(o){var d=_(this).constructor;c=Reflect.construct(s,arguments,d)}else c=s.apply(this,arguments);return At(this,c)}}function At(A,o){return o&&(B(o)==="object"||typeof o=="function")?o:ut(A)}function ut(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function lt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _(A){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_(A)}function z(A,o){var n="data-clipboard-".concat(A);if(o.hasAttribute(n))return o.getAttribute(n)}var dt=function(A){st(n,A);var o=ct(n);function n(s,c){var d;return U(this,n),d=o.call(this),d.resolveOptions(c),d.listenClick(s),d}return at(n,[{key:"resolveOptions",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof c.action=="function"?c.action:this.defaultAction,this.target=typeof c.target=="function"?c.target:this.defaultTarget,this.text=typeof c.text=="function"?c.text:this.defaultText,this.container=B(c.container)==="object"?c.container:document.body}},{key:"listenClick",value:function(c){var d=this;this.listener=C()(c,"click",function(k){return d.onClick(k)})}},{key:"onClick",value:function(c){var d=c.delegateTarget||c.currentTarget,k=this.action(d)||"copy",L=g({action:k,container:this.container,target:this.target(d),text:this.text(d)});this.emit(L?"success":"error",{action:k,text:L,trigger:d,clearSelection:function(){d&&d.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(c){return z("action",c)}},{key:"defaultTarget",value:function(c){var d=z("target",c);if(d)return document.querySelector(d)}},{key:"defaultText",value:function(c){return z("text",c)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return H(c,d)}},{key:"cut",value:function(c){return v(c)}},{key:"isSupported",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],d=typeof c=="string"?[c]:c,k=!!document.queryCommandSupported;return d.forEach(function(L){k=k&&!!document.queryCommandSupported(L)}),k}}]),n}(e()),ft=dt},828:function(a){var r=9;if(typeof Element<"u"&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}function i(e,u){for(;e&&e.nodeType!==r;){if(typeof e.matches=="function"&&e.matches(u))return e;e=e.parentNode}}a.exports=i},438:function(a,r,t){var i=t(828);function e(w,T,m,x,v){var R=C.apply(this,arguments);return w.addEventListener(m,R,v),{destroy:function(){w.removeEventListener(m,R,v)}}}function u(w,T,m,x,v){return typeof w.addEventListener=="function"?e.apply(null,arguments):typeof m=="function"?e.bind(null,document).apply(null,arguments):(typeof w=="string"&&(w=document.querySelectorAll(w)),Array.prototype.map.call(w,function(R){return e(R,T,m,x,v)}))}function C(w,T,m,x){return function(v){v.delegateTarget=i(v.target,T),v.delegateTarget&&x.call(w,v)}}a.exports=u},879:function(a,r){r.node=function(t){return t!==void 0&&t instanceof HTMLElement&&t.nodeType===1},r.nodeList=function(t){var i=Object.prototype.toString.call(t);return t!==void 0&&(i==="[object NodeList]"||i==="[object HTMLCollection]")&&"length"in t&&(t.length===0||r.node(t[0]))},r.string=function(t){return typeof t=="string"||t instanceof String},r.fn=function(t){var i=Object.prototype.toString.call(t);return i==="[object Function]"}},370:function(a,r,t){var i=t(879),e=t(438);function u(m,x,v){if(!m&&!x&&!v)throw new Error("Missing required arguments");if(!i.string(x))throw new TypeError("Second argument must be a String");if(!i.fn(v))throw new TypeError("Third argument must be a Function");if(i.node(m))return C(m,x,v);if(i.nodeList(m))return w(m,x,v);if(i.string(m))return T(m,x,v);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function C(m,x,v){return m.addEventListener(x,v),{destroy:function(){m.removeEventListener(x,v)}}}function w(m,x,v){return Array.prototype.forEach.call(m,function(R){R.addEventListener(x,v)}),{destroy:function(){Array.prototype.forEach.call(m,function(R){R.removeEventListener(x,v)})}}}function T(m,x,v){return e(document.body,m,x,v)}a.exports=u},817:function(a){function r(t){var i;if(t.nodeName==="SELECT")t.focus(),i=t.value;else if(t.nodeName==="INPUT"||t.nodeName==="TEXTAREA"){var e=t.hasAttribute("readonly");e||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),e||t.removeAttribute("readonly"),i=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var u=window.getSelection(),C=document.createRange();C.selectNodeContents(t),u.removeAllRanges(),u.addRange(C),i=u.toString()}return i}a.exports=r},279:function(a){function r(){}r.prototype={on:function(t,i,e){var u=this.e||(this.e={});return(u[t]||(u[t]=[])).push({fn:i,ctx:e}),this},once:function(t,i,e){var u=this;function C(){u.off(t,C),i.apply(e,arguments)}return C._=i,this.on(t,C,e)},emit:function(t){var i=[].slice.call(arguments,1),e=((this.e||(this.e={}))[t]||[]).slice(),u=0,C=e.length;for(u;u<C;u++)e[u].fn.apply(e[u].ctx,i);return this},off:function(t,i){var e=this.e||(this.e={}),u=e[t],C=[];if(u&&i)for(var w=0,T=u.length;w<T;w++)u[w].fn!==i&&u[w].fn._!==i&&C.push(u[w]);return C.length?e[t]=C:delete e[t],this}},a.exports=r,a.exports.TinyEmitter=r}},p={};function l(a){if(p[a])return p[a].exports;var r=p[a]={exports:{}};return y[a](r,r.exports,l),r.exports}return function(){l.n=function(a){var r=a&&a.__esModule?function(){return a.default}:function(){return a};return l.d(r,{a:r}),r}}(),function(){l.d=function(a,r){for(var t in r)l.o(r,t)&&!l.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:r[t]})}}(),function(){l.o=function(a,r){return Object.prototype.hasOwnProperty.call(a,r)}}(),l(686)}().default})}(M)),M.exports}var qt=Jt();const Pt=ht(qt),jt={class:"md-content"},Wt={__name:"mdContent",props:{readonly:{type:Boolean,default:!0},text:{type:String,default:""}},setup(E){const h=E;return(y,p)=>{const l=ot("v-md-preview");return S(),I("div",jt,[D(l,{text:h.text,mode:h.readonly?"preview":""},null,8,["text","mode"])])}}},Gt={class:"chat-msg"},Zt={class:"chat-msg-item"},$t={key:0,class:"chat-msg-item-time"},te={key:1,class:"chat-msg-item-main right"},ee={class:"content"},ne={key:2,class:"chat-msg-item-main left"},oe={class:"content"},re={class:"handle"},ie=["onClick"],ae=["onClick"],se={href:"javascript:void(0)",title:"喜欢",class:"btn-sm"},ce={href:"javascript:void(0)",title:"不喜欢",class:"btn-sm"},Ae={key:0,class:"stop"},ue=["onClick"],le={__name:"index",props:{restartAnswer:Function,stopAnswer:Function},setup(E){const h=E,y=j();Q([{id:1,time:"10:00:00",user:{content:"你好"},bot:{content:"根据警综平台数据统计，今日高新区警情总数为132起，其中有效警情128起，无效警情4起"}},{id:2,time:"",user:{content:"今日高新警情有多少？"},bot:{content:"好的"}}]);const p=r=>{new Pt(".btn-copy",{text:t=>(rt({message:"复制成功",type:"success"}),r)})},l=(r,t)=>{h.restartAnswer(r,t)},a=r=>{y.updateConversation(r,{loading:!1}),h.stopAnswer(r)};return(r,t)=>{const i=ot("svg-icon");return S(),I("div",Gt,[(S(!0),I(tt,null,et(O(y).conversationList,e=>(S(),I("div",Zt,[e.time?(S(),I("div",$t,q(e.time),1)):P("",!0),e.isUser?(S(),I("div",te,[f("div",ee,q(e.content),1),t[0]||(t[0]=nt('<div class="handle" data-v-97479414><a href="javascript:void(0)" class="btn-sm" data-v-97479414><img src="'+mt+'" alt="" data-v-97479414><span data-v-97479414>收藏</span></a><a href="javascript:void(0)" class="btn-sm" data-v-97479414><img src="'+Kt+'" alt="" data-v-97479414><span data-v-97479414>重问</span></a></div>',1))])):(S(),I("div",ne,[f("div",oe,[f("div",null,[D(Wt,{text:e.content},null,8,["text"])]),f("div",re,[f("a",{href:"javascript:void(0)",class:"btn-sm",onClick:u=>l(e.id,e.question)},t[1]||(t[1]=[f("img",{src:Xt,alt:""},null,-1),V(" 重新回答 ")]),8,ie),f("div",null,[f("a",{href:"javascript:void(0)",title:"复制",class:"btn-sm btn-copy",onClick:u=>p(e.content)},[D(i,{"icon-class":"copy"})],8,ae),f("a",se,[D(i,{"icon-class":"like"})]),f("a",ce,[D(i,{"icon-class":"unlike"})])])])]),e.loading?(S(),I("div",Ae,[f("a",{href:"javascript:void(0);",class:"btn-sm",onClick:u=>a(e.id)},t[2]||(t[2]=[f("img",{src:it,alt:""},null,-1),V(" 停止 ")]),8,ue)])):P("",!0)]))]))),256))])}}},de=Y(le,[["__scopeId","data-v-97479414"]]),fe={class:"app-container chat"},pe={class:"chat-main",ref:"chatMain"},ve={class:"chat-handle"},he={class:"chat-input"},me=gt({name:"Chat"}),ge=Object.assign(me,{setup(E){const{proxy:h}=yt(),y=j(),p=Q(""),l=Q(!1),a=Q(!1),r=Q(!1),t=Q(""),i=Q(""),e=Q(null),u=()=>{a.value=!1},C=()=>{a.value=!0},w=b=>{if(b.altKey&&b.key==="Enter"){b.preventDefault();const g=b.target,B=g.selectionStart,U=g.selectionEnd;g.value=g.value.substring(0,B)+`
`+g.value.substring(U),g.selectionStart=g.selectionEnd=B+1}!b.altKey&&b.key==="Enter"&&(b.preventDefault(),T())},T=()=>{const b=p.value.trim();if(l.value||r.value||!b)return;p.value="",h.$refs.chatTextarea.focus(),l.value=!0;const g={id:Z(),content:b,time:new Date().getTime(),isUser:!0};y.addConversation(g),N(),y.sendQuestion(b).then(()=>{x(b)})},m=b=>{p.value=b,T()},x=b=>{r.value=!0,N(),e.value=kt({onOpen:g=>{console.log("连接已建立",g),t.value="",r.value=!1,i.value=Z();const B={id:i.value,question:b,content:t.value,isUser:!1,loading:!0};y.addConversation(B),N()},onMessage:g=>{g.answer?(t.value+=g.answer,y.updateConversation(i.value,{content:t.value}),N()):rt({message:"解析消息失败",type:"error"})},onError:g=>{throw v(),console.log("发生网络错误"),g},onClose:()=>{e.value&&e.value.abort(),v(),console.log("连接已关闭")}})},v=()=>{y.updateConversation(i.value,{loading:!1}),N(),l.value=!1,r.value=!1,t.value="",i.value=""},R=()=>{r.value&&(r.value=!1),e.value&&e.value.abort()},N=async()=>{await It();const b=20,g=h.$refs.chatMain.scrollHeight,B=h.$refs.chatMain.scrollTop,U=h.$refs.chatMain.clientHeight;g-B-U>=b&&(h.$refs.chatMain.scrollTop=g)},K=b=>{v()},H=(b,g)=>{l.value=!0,y.delConversation(b),x(g)},F=()=>{p.value="",h.$refs.chatTextarea.focus(),l.value=!1,a.value=!0,r.value=!1,t.value="",i.value="",y.clearConversation()};return Ct(()=>{h.$refs.chatTextarea.focus(),a.value=!0}),bt(()=>{e.value&&e.value.abort(),F()}),(b,g)=>(S(),I("div",fe,[f("div",pe,[D(O(de),{restartAnswer:H,stopAnswer:K}),O(r)?(S(),Et(O(Yt),{key:0,stopThinking:R})):P("",!0)],512),f("div",ve,[D(O(Lt),{submitTip:m}),f("div",he,[f("div",{class:"chat-input-left"},[f("img",{src:wt,alt:"",title:"开启新对话",onClick:F})]),f("div",{class:xt([{"is-focus":O(a)},"chat-input-main"])},[Tt(f("textarea",{"onUpdate:modelValue":g[0]||(g[0]=B=>St(p)?p.value=B:null),ref:"chatTextarea",name:"msg",placeholder:"请输入问题，alt+回车键可换行",onKeydown:w,onBlur:u,onFocus:C},null,544),[[Bt,O(p)]]),f("div",{class:"chat-input-submit",onClick:T},g[1]||(g[1]=[f("img",{src:Rt,alt:"",title:"发送"},null,-1)]))],2)])])]))}}),Te=Y(ge,[["__scopeId","data-v-1735c737"]]);export{Te as default};
